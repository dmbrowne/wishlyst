[debug] [2020-05-18T14:44:24.434Z] ----------------------------------------------------------------------
[debug] [2020-05-18T14:44:24.436Z] Command:       /Users/dbrowne/.nvm/versions/node/v12.16.1/bin/node /Users/dbrowne/.nvm/versions/node/v12.16.1/bin/firebase emulators:start
[debug] [2020-05-18T14:44:24.436Z] CLI Version:   7.16.1
[debug] [2020-05-18T14:44:24.436Z] Platform:      darwin
[debug] [2020-05-18T14:44:24.436Z] Node Version:  v12.16.1
[debug] [2020-05-18T14:44:24.436Z] Time:          Mon May 18 2020 15:44:24 GMT+0100 (British Summer Time)
[debug] [2020-05-18T14:44:24.436Z] ----------------------------------------------------------------------
[debug] [2020-05-18T14:44:24.437Z] 
[debug] [2020-05-18T14:44:24.441Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2020-05-18T14:44:24.441Z] > authorizing via signed-in user
[info] i  emulators: Starting emulators: functions, firestore, hosting
[debug] [2020-05-18T14:44:24.456Z] [hub] writing locator at /var/folders/bh/c4y385_54dg1stpblf_hy1j40000gn/T/hub-gift-wishlyst.json
[info] ✔  hub: emulator hub started at http://localhost:4400
[warn] ⚠  Your requested "node" version "8" doesn't match your global version "12"
[info] ✔  functions: functions emulator started at http://localhost:5001
[info] i  firestore: Serving ALL traffic (including WebChannel) on http://localhost:7000
[warn] ⚠  firestore: Support for WebChannel on a separate port (7001) is DEPRECATED and will go away soon. Please use port above instead.
[debug] [2020-05-18T14:44:24.483Z] Ignoring unsupported arg: projectId
[debug] [2020-05-18T14:44:24.483Z] Ignoring unsupported arg: auto_download
[debug] [2020-05-18T14:44:24.483Z] Starting firestore emulator with command {"binary":"java","args":["-Duser.language=en","-jar","/Users/dbrowne/.cache/firebase/emulators/cloud-firestore-emulator-v1.11.1.jar","--host","localhost","--port",7000,"--rules","/Users/dbrowne/Dev/wishlyst/firestore.rules","--functions_emulator","localhost:5001","--webchannel_port",7001],"optionalArgs":["port","webchannel_port","host","rules","functions_emulator","seed_from_export"],"joinArgs":false}
[info] i  firestore: firestore emulator logging to firestore-debug.log
[debug] [2020-05-18T14:44:25.791Z] API endpoint: http://localhost:
[debug] [2020-05-18T14:44:25.791Z] 7000
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=localhost:7000

Dev App Server is now running.


[info] ✔  firestore: firestore emulator started at http://localhost:7000
[info] i  firestore: For testing set FIRESTORE_EMULATOR_HOST=localhost:7000
[debug] [2020-05-18T14:44:26.012Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/gift-wishlyst/webApps/-/config  
 
[debug] [2020-05-18T14:44:26.785Z] <<< HTTP RESPONSE 200
[info] i  hosting: Serving hosting files from: build
[info] ✔  hosting: Local server: http://localhost:5000
[info] ✔  hosting: hosting emulator started at http://localhost:5000
[info] i  functions: Watching "/Users/dbrowne/Dev/wishlyst/functions" for Cloud Functions...
[debug] [2020-05-18T14:44:27.084Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-05-18T14:44:27.084Z] [worker-pool] Adding worker with key ~diagnostic~, total=1
[debug] [2020-05-18T14:44:27.084Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-05-18T14:44:27.084Z] [worker-~diagnostic~-ebf132da-395b-4643-a92b-9205d0bfac3c]: Assigning socketPath: /var/folders/bh/c4y385_54dg1stpblf_hy1j40000gn/T/fire_emu_23646.sock
[debug] [2020-05-18T14:44:27.085Z] [worker-~diagnostic~-ebf132da-395b-4643-a92b-9205d0bfac3c]: BUSY
[debug] [2020-05-18T14:44:27.269Z] [runtime-status] [23646] Functions runtime initialized. {"cwd":"/Users/dbrowne/Dev/wishlyst/functions","node_version":"12.16.1"}
[debug] [2020-05-18T14:44:27.270Z] [runtime-status] [23646] Disabled runtime features: undefined
[debug] [2020-05-18T14:44:27.274Z] [runtime-status] [23646] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dbrowne/Dev/wishlyst/functions/node_modules/firebase-admin/lib/index.js"}
[debug] [2020-05-18T14:44:27.275Z] [runtime-status] [23646] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/dbrowne/Dev/wishlyst/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2020-05-18T14:44:27.664Z] [runtime-status] [23646] Found google-gax at /Users/dbrowne/Dev/wishlyst/functions/node_modules/google-gax/build/src/index.js
[debug] [2020-05-18T14:44:27.664Z] [runtime-status] [23646] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"},{"name":"google-gax","status":"mocked"}]
[debug] [2020-05-18T14:44:27.703Z] [runtime-status] [23646] Checked functions.config() {"config":{}}
[debug] [2020-05-18T14:44:27.703Z] [runtime-status] [23646] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/dbrowne/Dev/wishlyst/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2020-05-18T14:44:27.705Z] [runtime-status] [23646] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dbrowne/Dev/wishlyst/functions/node_modules/firebase-admin/lib/index.js"}
[debug] [2020-05-18T14:44:27.705Z] [runtime-status] [23646] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/dbrowne/Dev/wishlyst/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2020-05-18T14:44:27.808Z] [runtime-status] [23646] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.10.0","resolution":"/Users/dbrowne/Dev/wishlyst/functions/node_modules/firebase-admin/lib/index.js"}}
[debug] [2020-05-18T14:44:28.094Z] [runtime-status] [23646] initializeApp(DEFAULT) {"databaseURL":"https://gift-wishlyst.firebaseio.com","storageBucket":"gift-wishlyst.appspot.com","projectId":"gift-wishlyst"}
[debug] [2020-05-18T14:44:28.185Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/gift-wishlyst/databases/(default)/documents/users/{id}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-05-18T14:44:28.185Z] >>> HTTP REQUEST PUT http://localhost:7000/emulator/v1/projects/gift-wishlyst/triggers/updateAccountProfile  
 {"eventTrigger":{"resource":"projects/gift-wishlyst/databases/(default)/documents/users/{id}","eventType":"providers/cloud.firestore/eventTypes/document.update","service":"firestore.googleapis.com"}}
[debug] [2020-05-18T14:44:28.187Z] [worker-~diagnostic~-ebf132da-395b-4643-a92b-9205d0bfac3c]: IDLE
[debug] [2020-05-18T14:44:28.213Z] May 18, 2020 3:44:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-05-18T14:44:28.324Z] May 18, 2020 3:44:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-05-18T14:44:28.678Z] <<< HTTP RESPONSE 200
[debug] [2020-05-18T14:44:28.679Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}/lystItems/{itemId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.delete\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-05-18T14:44:28.679Z] >>> HTTP REQUEST PUT http://localhost:7000/emulator/v1/projects/gift-wishlyst/triggers/removeImageAndThumbsOnLystItemDelete  
 {"eventTrigger":{"resource":"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}/lystItems/{itemId}","eventType":"providers/cloud.firestore/eventTypes/document.delete","service":"firestore.googleapis.com"}}
[debug] [2020-05-18T14:44:28.682Z] May 18, 2020 3:44:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-05-18T14:44:28.688Z] <<< HTTP RESPONSE 200
[debug] [2020-05-18T14:44:28.688Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}/lystItems/{itemId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-05-18T14:44:28.688Z] >>> HTTP REQUEST PUT http://localhost:7000/emulator/v1/projects/gift-wishlyst/triggers/removeImageThumbsOnRemove  
 {"eventTrigger":{"resource":"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}/lystItems/{itemId}","eventType":"providers/cloud.firestore/eventTypes/document.update","service":"firestore.googleapis.com"}}
[debug] [2020-05-18T14:44:28.691Z] May 18, 2020 3:44:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-05-18T14:44:28.696Z] <<< HTTP RESPONSE 200
[debug] [2020-05-18T14:44:28.696Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.delete\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-05-18T14:44:28.696Z] >>> HTTP REQUEST PUT http://localhost:7000/emulator/v1/projects/gift-wishlyst/triggers/deleteAllLystItems  
 {"eventTrigger":{"resource":"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}","eventType":"providers/cloud.firestore/eventTypes/document.delete","service":"firestore.googleapis.com"}}
[debug] [2020-05-18T14:44:28.699Z] May 18, 2020 3:44:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-05-18T14:44:28.704Z] <<< HTTP RESPONSE 200
[debug] [2020-05-18T14:44:28.704Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.delete\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-05-18T14:44:28.704Z] >>> HTTP REQUEST PUT http://localhost:7000/emulator/v1/projects/gift-wishlyst/triggers/deleteAllAnonymousUsers  
 {"eventTrigger":{"resource":"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}","eventType":"providers/cloud.firestore/eventTypes/document.delete","service":"firestore.googleapis.com"}}
[debug] [2020-05-18T14:44:28.707Z] May 18, 2020 3:44:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-05-18T14:44:28.712Z] <<< HTTP RESPONSE 200
[debug] [2020-05-18T14:44:28.712Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}/categories/{categoryId}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.delete\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-05-18T14:44:28.712Z] >>> HTTP REQUEST PUT http://localhost:7000/emulator/v1/projects/gift-wishlyst/triggers/removeCategoriesFromLystItem  
 {"eventTrigger":{"resource":"projects/gift-wishlyst/databases/(default)/documents/lysts/{lystId}/categories/{categoryId}","eventType":"providers/cloud.firestore/eventTypes/document.delete","service":"firestore.googleapis.com"}}
[debug] [2020-05-18T14:44:28.715Z] May 18, 2020 3:44:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-05-18T14:44:28.720Z] <<< HTTP RESPONSE 200
[info] ✔  functions[createUserProfile]: http function initialized (http://localhost:5001/gift-wishlyst/us-central1/createUserProfile).
[info] ✔  functions[doesAccountExist]: http function initialized (http://localhost:5001/gift-wishlyst/us-central1/doesAccountExist).
[info] ✔  functions[updateAccountProfile]: firestore function initialized.
[info] ✔  functions[getImagesFromUrl]: http function initialized (http://localhost:5001/gift-wishlyst/us-central1/getImagesFromUrl).
[info] ✔  functions[generateThumbnails]: http function initialized (http://localhost:5001/gift-wishlyst/us-central1/generateThumbnails).
[info] ✔  functions[removeImageAndThumbsOnLystItemDelete]: firestore function initialized.
[info] ✔  functions[convertToSingleThumb]: http function initialized (http://localhost:5001/gift-wishlyst/us-central1/convertToSingleThumb).
[info] ✔  functions[ugradeAnnoymousUser]: http function initialized (http://localhost:5001/gift-wishlyst/us-central1/ugradeAnnoymousUser).
[info] ✔  functions[removeImageThumbsOnRemove]: firestore function initialized.
[info] ✔  functions[deleteAllLystItems]: firestore function initialized.
[info] ✔  functions[deleteAllAnonymousUsers]: firestore function initialized.
[info] ✔  functions[removeCategoriesFromLystItem]: firestore function initialized.
[info] ✔  emulators: All emulators started, it is now safe to connect.
[info] i  firestore: Change detected, updating rules...
[debug] [2020-05-18T14:46:07.528Z] >>> HTTP REQUEST PUT http://localhost:7000/emulator/v1/projects/gift-wishlyst:securityRules  

[debug] [2020-05-18T14:46:07.533Z] May 18, 2020 3:46:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-05-18T14:46:07.581Z] <<< HTTP RESPONSE 200
[warn] ⚠  firestore.rules:13:11 - ERROR Missing 'match' keyword before path.
[warn] ⚠  firestore.rules:14:7 - ERROR Unexpected 'deny'.
[warn] ⚠  firestore.rules:14:7 - ERROR mismatched input 'deny' expecting {'{', '/', PATH_SEGMENT}
[warn] ⚠  firestore.rules:17:1 - ERROR Unexpected '}'.
[info] ✔  firestore: Rules updated.
